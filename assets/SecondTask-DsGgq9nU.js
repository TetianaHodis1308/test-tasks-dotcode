import{b as c,j as e}from"./index-jhzFUUhz.js";const w=()=>{const r=c.useRef(null),[n,d]=c.useState([]),[l,x]=c.useState(!1),i=n.reduce((t,s)=>{const o=s.out?.reduce((a,m)=>a+m.value,0)||0;return t+o},0)/1e8;c.useEffect(()=>(l&&(r.current=new WebSocket("wss://ws.blockchain.info/inv"),r.current.onopen=()=>{r.current?.send(JSON.stringify({op:"unconfirmed_sub"}))},r.current.onmessage=t=>{const s=JSON.parse(t.data);s.op==="utx"&&d(o=>[s.x,...o])},r.current.onerror=t=>{console.error("WebSocket error:",t)}),()=>{r.current?.close()}),[l]);const u=()=>{x(!0)},b=()=>{r.current?.close(),x(!1)},h=()=>{d([])};return e.jsxs("section",{className:"flex flex-col items-center justify-start min-h-[60vh] bg-white px-4 py-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-black mb-4",children:"Second Task"}),e.jsx("h2",{className:"text-3l sm:text-4xl text-orange-500 mb-6",children:"WebSocket-based Bitcoin Transactions"}),e.jsxs("div",{className:"relative w-full min-h-150 bg-gray-100 p-4",children:[e.jsxs("div",{className:"flex justify-center gap-10 my-5",children:[e.jsx("button",{className:`bg-green-800 text-white text-2xl rounded-xl w-50 py-2 ${l?"cursor-not-allowed":"cursor-pointer hover:bg-green-600 "}`,onClick:u,children:"Start"}),e.jsx("button",{className:`bg-red-800 text-white text-2xl rounded-xl w-50 py-2 ${l?"cursor-pointer hover:bg-red-600":"cursor-not-allowed"}`,onClick:b,children:"Stop"}),e.jsx("button",{className:`bg-yellow-600 text-white text-2xl rounded-xl w-50 py-2  ${n.length?"hover:bg-yellow-400 cursor-pointer":"cursor-not-allowed"}`,onClick:h,children:"Reset"})]}),e.jsxs("table",{className:"w-full border-collapse border-2 border-black text-left",children:[e.jsxs("caption",{className:"font-bold text-3xl text-center pt-20 pb-4",children:["Sum = ",i," BTC"]}),e.jsx("thead",{children:e.jsx("tr",{children:["From","To","Sum"].map(t=>e.jsx("th",{scope:"col",className:"text-2xl border-2 border-black px-4 py-2",children:t},t))})}),e.jsx("tbody",{children:n.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-20 break-words whitespace-normal border-2 border-black px-4 py-2",children:t.inputs[0]?.prev_out?.addr||"-"}),e.jsx("td",{className:"max-w-20 break-words whitespace-normal border-2 border-black px-4 py-2",children:t.out[0]?.addr||"-"}),e.jsx("td",{className:"max-w-20 break-words whitespace-normal border-2 border-black px-4 py-2",children:e.jsxs("div",{className:"min-h-20",children:[t.out?(t.out.reduce((o,a)=>o+a.value,0)/1e8).toFixed(8):"0.00000000"," ","BTC"]})})]},s))})]})]})]})};export{w as default};
